syn match lilyCustomFunction &\\\w\+&
syn match lilyBuiltin &\V\\\(accepts\|alias\|consists\|defaultchild\|denies\|hide\|include\|language\|name\|omit\|once\|set\|unset\|override\|revert\|remove\|temporary\|undo\|version\|score\|book\|bookpart\|header\|paper\|midi\|layout\|with\|context\)\>&
syn match lilyMusicCommand &\V\\\(absolute\|acciaccatura\|accidentalStyle\|addChordShape\|addInstrumentDefinition\|addlyrics\|addQuote\|afterGrace\|aikenHeads\|aikenHeadsMinor\|allowPageTurn\|alterBroken\|alternative\|appendToTag\|applyContext\|applyMusic\|applyOutput\|appoggiatura\|arpeggio\|arpeggioArrowDown\|arpeggioArrowUp\|arpeggioBracket\|arpeggioNormal\|arpeggioParenthesis\|ascendens\|auctum\|augmentum\|autoAccidentals\|autoBeamOff\|autoBeamOn\|autochange\|balloonGrobText\|balloonLengthOff\|balloonLengthOn\|balloonText\|bar\|barNumberCheck\|bassFigureExtendersOff\|bassFigureExtendersOn\|bassFigureStaffAlignmentDown\|bassFigureStaffAlignmentNeutral\|bassFigureStaffAlignmentUp\|bendAfter\|blackTriangleMarkup\|bookOutputName\|bookOutputSuffix\|bracketCloseSymbol\|bracketOpenSymbol\|break\|breathe\|breve\|cadenzaOff\|cadenzaOn\|caesura\|cavum\|change\|chordRepeats\|chords\|clef\|cm\|compoundMeter\|compressFullBarRests\|cr\|cresc\|crescHairpin\|crescTextCresc\|crossStaff\|cueClef\|cueClefUnset\|cueDuring\|cueDuringWithClef\|dashBar\|dashDash\|dashDot\|dashHat\|dashLarger\|dashPlus\|dashUnderscore\|deadNote\|decr\|default\|defaultNoteHeads\|defaultTimeSignature\|defineBarLine\|deminutum\|descendens\|dim\|dimHairpin\|dimTextDecr\|dimTextDecresc\|dimTextDim\|displayLilyMusic\|displayMusic\|divisioMaior\|divisioMaxima\|divisioMinima\|dotsDown\|dotsNeutral\|dotsUp\|drumPitchTable\|drums\|dynamicDown\|dynamicNeutral\|dynamicUp\|easyHeadsOff\|easyHeadsOn\|endcr\|endcresc\|enddecr\|enddim\|endincipit\|endSpanners\|episemFinis\|episemInitium\|escapedBiggerSymbol\|escapedExclamationSymbol\|escapedParenthesisCloseSymbol\|escapedParenthesisOpenSymbol\|escapedSmallerSymbol\|expandFullBarRests\|f\|featherDurations\|fermataMarkup\|ff\|fff\|ffff\|fffff\|figures\|finalis\|fingeringOrientations\|flexa\|fp\|frenchChords\|fullJazzExceptions\|funkHeads\|funkHeadsMinor\|fz\|germanChords\|glissando\|grace\|graceSettings\|harmonic\|hideNotes\|hideStaffSwitch\|huge\|ignatzekExceptionMusic\|ignatzekExceptions\|iij\|IIJ\|ij\|IJ\|improvisationOff\|improvisationOn\|in\|inclinatum\|includePageLayoutFile\|indent\|instrumentSwitch\|instrumentTransposition\|interscoreline\|italianChords\|keepWithTag\|key\|killCues\|label\|laissezVibrer\|large\|ligature\|linea\|longa\|lyrics\|lyricsto\|maininput\|majorSevenSymbol\|makeClusters\|mark\|markLengthOff\|markLengthOn\|markup\|markuplines\|markuplist\|maxima\|melisma\|melismaEnd\|mergeDifferentlyDottedOff\|mergeDifferentlyDottedOn\|mergeDifferentlyHeadedOff\|mergeDifferentlyHeadedOn\|mf\|mm\|mp\|musicMap\|neumeDemoLayout\|new\|newSpacingSection\|noBeam\|noBreak\|noPageBreak\|noPageTurn\|normalsize\|numericTimeSignature\|octaveCheck\|oldaddlyrics\|oneVoice\|oriscus\|ottava\|overrideProperty\|overrideTimeSignatureSettings\|p\|pageBreak\|pageTurn\|palmMute\|palmMuteOn\|parallelMusic\|parenthesisCloseSymbol\|parenthesisOpenSymbol\|parenthesize\|partcombine\|partCombineListener\|partial\|partialJazzExceptions\|partialJazzMusic\|pes\|phrasingSlurDashed\|phrasingSlurDotted\|phrasingSlurDown\|phrasingSlurNeutral\|phrasingSlurSolid\|phrasingSlurUp\|pipeSymbol\|pitchedTrill\|pointAndClickOff\|pointAndClickOn\|pp\|ppp\|pppp\|ppppp\|predefinedFretboardsOff\|predefinedFretboardsOn\|pt\|pushToTag\|quilisma\|quoteDuring\|relative\|RemoveEmptyRhythmicStaffContext\|RemoveEmptyStaffContext\|removeWithTag\|repeat\|repeatTie\|resetRelativeOctave\|responsum\|rest\|rfz\|rightHandFinger\|sacredHarpHeads\|sacredHarpHeadsMinor\|scaleDurations\|scoreTweak\|semiGermanChords\|sf\|sff\|sfp\|sfz\|shape\|shiftDurations\|shiftOff\|shiftOn\|shiftOnn\|shiftOnnn\|showStaffSwitch\|single\|skip\|skipTypesetting\|slurDashed\|slurDotted\|slurDown\|slurNeutral\|slurSolid\|slurUp\|small\|sostenutoOff\|sostenutoOn\|southernHarmonyHeads\|southernHarmonyHeadsMinor\|sp\|spacingTweaks\|spp\|startAcciaccaturaMusic\|startAppoggiaturaMusic\|startGraceMusic\|startGroup\|startStaff\|startTextSpan\|startTrillSpan\|stemDown\|stemNeutral\|stemUp\|stopAcciaccaturaMusic\|stopAppoggiaturaMusic\|stopGraceMusic\|stopGroup\|stopStaff\|stopTextSpan\|stopTrillSpan\|stringTuning\|strokeFingerOrientations\|stropha\|sustainOff\|sustainOn\|tabFullNotation\|tag\|teeny\|tempo\|tempoWholesPerMinute\|textLengthOff\|textLengthOn\|textSpannerDown\|textSpannerNeutral\|textSpannerUp\|tieDashed\|tieDotted\|tieDown\|tieNeutral\|tieSolid\|tieUp\|tildeSymbol\|time\|times\|timing\|tiny\|tocItem\|transpose\|transposedCueDuring\|transposition\|treCorde\|tuplet\|tupletDown\|tupletNeutral\|tupletUp\|tweak\|unaCorda\|unfoldRepeats\|unHideNotes\|unit\|versus\|virga\|virgula\|voiceFour\|voiceFourStyle\|voiceNeutralStyle\|voiceOne\|voiceOneStyle\|voiceThree\|voiceThreeStyle\|voiceTwo\|voiceTwoStyle\|walkerHeads\|walkerHeadsMinor\|whiteTriangleMarkup\|withMusicProperty\)\>&
syn match lilyArticulation &\V\\\(accent\|espressivo\|marcato\|portato\|staccatissimo\|staccato\|tenuto\)\>&
syn match lilyArticulation &\v[\-\^_]([\^+\-!>._]|"@=)&
syn match lilyOrnament &\V\\\(prall\|mordent\|prallmordent\|turn\|upprall\|downprall\|upmordent\|downmordent\|lineprall\|prallprall\|pralldown\|prallup\|reverseturn\|trill\)\>&
syn match lilyFermata &\V\\\(shortfermata\|fermata\|longfermata\|verylongfermata\)\>&
syn match lilyInstrumentScript &\V\\\(upbow\|downbow\|flageolet\|thumb\|snappizzicato\|open\|halfopen\|stopped\|lheel\|rheel\|ltoe\|rtoe\)\>&
syn match lilyRepeat &\V\\\(segno\|coda\|varcoda\)\>&
syn match lilyAncient &\V\\\(ictus\|accentus\|circulus\|semicirculus\|signumcongruentiae\)\>&
syn match lilyScale &\V\\\(major\|minor\|ionian\|dorian\|phrygian\|lydian\|mixolydian\|aeolian\|locrian\)\>&
syn match lilySymbol &[|[\]~()]&
syn match lilySymbol &\\[!()><[\]!\\]&
syn match lilyNumber &\v-?\d+([./]\d+)?&
syn match lilyDuration &\v\d@<!\s*\zs(128|64|32|16|8|4|2|1|\\breve|\\longa|\\maxima)\.*\d@!& nextgroup=lilyDurationMul
syn match lilyRDuration &\v\d@<!\s*\zs(128|64|32|16|8|4|2|1|\\breve|\\longa|\\maxima)\.*\d@!& nextgroup=lilyDurationMul contained
syn match lilyDurationMul &\v\s*\*\s*\d+(/\d+)?& nextgroup=lilyDurationMul contained
syn match lilyNumber &\v\d+/\d+&
syn region lilyString start=&"& end=&"& contains=@Spell
syn region lilyComment start=&%{& end=&%}&
syn region lilyComment start=&%{\@!& end=&$&
syn cluster lilyFunction contains=lilyCustomFunction,lilyBuiltin,lilyMusicCommand,lilyArticulation,lilyOrnament,lilyFermata,lilyInstrumentScript,lilyRepeat,lilyAncient,lilyScales,lilyMidiInstrument,lilyRepeatType,lilyAccidentalStyle,lilyClef
syn cluster lilyMode contains=lilyNotemode,lilyLyricmode,lilyChordmode,lilyDrummode,lilyFiguremode
syn cluster lilyGlobal contains=lilyDuration,lilyNumber,lilyString,lilyComment,lilyScheme,@lilyFunction,lilyMarkup,lilySymbol
syn match lilyMarkupFunction &\V\\\(doubleflat\|doublesharp\|eyeglasses\|flat\|natural\|null\|semiflat\|semisharp\|sesquiflat\|sesquisharp\|sharp\|strut\|table-of-contents\|backslashed-digit\|bold\|box\|bracket\|caps\|center-align\|center-column\|char\|circle\|column\|concat\|dir-column\|draw-dashed-line\|draw-dotted-line\|draw-line\|dynamic\|fill-line\|finger\|fontCaps\|fret-diagram\|fret-diagram-terse\|fret-diagram-verbose\|fromproperty\|harp-pedal\|hbracket\|hspace\|huge\|italic\|justify\|justify-field\|justify-string\|large\|larger\|left-align\|left-brace\|left-column\|line\|lookup\|markalphabet\|markletter\|medium\|musicglyph\|normalsize\|normal-size-sub\|normal-size-super\|normal-text\|number\|oval\|postscript\|right-align\|right-brace\|right-column\|roman\|rounded-box\|sans\|score\|simple\|slashed-digit\|small\|smallCaps\|smaller\|stencil\|sub\|super\|teeny\|text\|tied-lyric\|tiny\|transparent\|triangle\|typewriter\|underline\|upright\|vcenter\|vspace\|verbatim-file\|whiteout\|wordwrap\|wordwrap-field\|wordwrap-string\|abs-fontsize\|auto-footnote\|combine\|customTabClef\|fontsize\|footnote\|fraction\|halign\|hcenter-in\|lower\|magnify\|note\|on-the-fly\|override\|pad-around\|pad-markup\|pad-x\|page-link\|path\|raise\|rotate\|scale\|translate\|translate-scaled\|with-color\|with-link\|with-url\|woodwind-diagram\|arrow-head\|beam\|draw-circle\|eps-file\|filled-box\|general-align\|note-by-number\|pad-to-box\|page-ref\|with-dimensions\|pattern\|put-adjacent\|fill-with-pattern\|column-lines\|justified-lines\|override-lines\|wordwrap-internal\|wordwrap-lines\|wordwrap-string-internal\)\>& contained
syn match lilyMarkup &\v\\markup\s*& nextgroup=lilyMarkupBody
syn cluster lilyMarkup contains=@lilyGlobal,lilyMarkupFunction,lilyMarkupBody
syn region lilyMarkupBody start=&{& end=&}& contains=@lilyMarkup contained
syn region lilyMarkupBody start=&<<& end=&>>& contains=@lilyMarkup contained
syn match lilyPitch &\v\a@<!%([a-g]%(%(es)?%(e[hs])?|%(is)?%(i[hs])?)|[ae]s%(es)?)\a@!%(%(\s*')+|%(\s*,)+|)%(\s*!)*%(\s*\?)*&
syn match lilyError &\v[!?,']&
syn match lilyRest &\v\a@<![rRs]\a@!& nextgroup=lilyRDuration
syn region lilyChord start=&<\@<!<<\@!& end=&>& contains=lilyPitch,@lilyFunction,lilyScheme,lilyError
syn match lilyChordRepeat &\v\a@<!q\a@!&
syn match lilyNotemode &\v\\notemode\s*& nextgroup=lilyNotemodeBody
syn cluster lilyNotemode contains=TOP,lilyNotemodeBody
syn region lilyNotemodeBody start=&{& end=&}& contains=@lilyNotemode
syn region lilyNotemodeBody start=&<<& end=&>>& contains=@lilyNotemode
syn match lilyLyric &\w\+& contained
syn match lilyLyricHyphen &\a\@<!--\w\@!& contained
syn match lilyLyricExtender &\a\@<!__\w\@!& contained
syn match lilyLyricmode &\v\\lyric(mode|s)\s*& nextgroup=lilyLyricmodeBody
syn cluster lilyLyricmode contains=@lilyGlobal,@lilyMode,lilyLyric,lilyLyricHyphen,lilyLyricExtender,lilyLyricmodeBody
syn region lilyLyricmodeBody start=&{& end=&}& contains=@lilyLyricmode contained
syn region lilyLyricmodeBody start=&<<& end=&>>& contains=@lilyLyricmode contained
syn match lilyChordname && contained
syn match lilyChordmode &\v\\chord(mode|s)\s*& nextgroup=lilyChordmodeBody
syn cluster lilyChordmode contains=@lilyGlobal,@lilyMode,lilyChordname,lilyRest,lilyChordmodeBody
syn region lilyChordmodeBody start=&{& end=&}& contains=@lilyChordmode contained
syn region lilyChordmodeBody start=&<<& end=&>>& contains=@lilyChordmode contained
syn match lilyDrum &\v\a@<!(acousticbassdrum|bda|bassdrum|bd|snare|sn|electricsnare|sne|acousticsnare|sna|lowfloortom|tomfl|highfloortom|tomfh|lowtom|toml|hightom|tomh|lowmidtom|tomml|himidtom|tommh|closedhihat|hhc|hihat|hh|pedalhihat|hhp|openhihat|hho|halfopenhihat|hhho|crashcymbala|cymca|crashcymbal|cymc|ridecymbala|cymra|ridecymbal|cymr|chinesecymbal|cymch|splashcymbal|cyms|crashcymbalb|cymcb|ridecymbalb|cymrb|ridebell|rb|cowbell|cb|mutehibongo|bohm|hibongo|boh|openhibongo|boho|mutelobongo|bolm|lobongo|bol|openlobongo|bolo|mutehiconga|cghm|muteloconga|cglm|openhiconga|cgho|hiconga|cgh|openloconga|cglo|loconga|cgl|hitimbale|timh|lotimbale|timl|hiagogo|agh|loagogo|agl|hisidestick|ssh|sidestick|ss|losidestick|ssl|shortguiro|guis|longguiro|guil|guiro|gui|cabasa|cab|maracas|mar|shortwhistle|whs|longwhistle|whl|handclap|hc|tambourine|tamb|vibraslap|vibs|tamtam|tt|claves|cl|hiwoodblock|wbh|lowoodblock|wbl|mutecuica|cuim|opencuica|cuio|mutetriangle|trim|triangle|tri|opentriangle|trio|oneup|ua|twoup|ub|threeup|uc|fourup|ud|fiveup|ue|onedown|da|twodown|db|threedown|dc|fourdown|dd|fivedown|de)\a@!& contained
syn match lilyDrummode &\v\\drum(mode|s)\s*& nextgroup=lilyDrummodeBody
syn cluster lilyDrummode contains=@lilyGlobal,@lilyMode,lilyDrum,lilyRest,lilyDrummodeBody
syn region lilyDrummodeBody start=&{& end=&}& contains=@lilyDrummode contained
syn region lilyDrummodeBody start=&<<& end=&>>& contains=@lilyDrummode contained
syn match lilyFigure && contained
syn match lilyFiguremode &\v\\figure(mode|s)\s*& nextgroup=lilyFiguremodeBody
syn cluster lilyFiguremode contains=@lilyGlobal,@lilyMode,lilyFigure,lilyRest,lilyFiguremodeBody
syn region lilyFiguremodeBody start=&{& end=&}& contains=@lilyFiguremode contained
syn region lilyFiguremodeBody start=&<<& end=&>>& contains=@lilyFiguremode contained
syn match lilyVar &\v[a-zA-Z-]+\ze\s*\=& contained
syn match lilyHeader &\v\\header\s*& nextgroup=lilyHeaderBody
syn cluster lilyHeader contains=@lilyGlobal,lilyVar,lilyHeaderBody
syn region lilyHeaderBody start=&{& end=&}& contains=@lilyHeader contained
syn region lilyHeaderBody start=&<<& end=&>>& contains=@lilyHeader contained
syn match lilyPaper &\v\\paper\s*& nextgroup=lilyPaperBody
syn cluster lilyPaper contains=@lilyGlobal,lilyVar,lilyPaperBody
syn region lilyPaperBody start=&{& end=&}& contains=@lilyPaper contained
syn region lilyPaperBody start=&<<& end=&>>& contains=@lilyPaper contained
syn match lilyLayout &\v\\layout\s*& nextgroup=lilyLayoutBody
syn cluster lilyLayout contains=@lilyGlobal,lilyVar,lilyContextMod,lilyLayoutBody
syn region lilyLayoutBody start=&{& end=&}& contains=@lilyLayout contained
syn region lilyLayoutBody start=&<<& end=&>>& contains=@lilyLayout contained
syn match lilyMidi &\v\\midi\s*& nextgroup=lilyMidiBody
syn cluster lilyMidi contains=@lilyGlobal,lilyVar,lilyContextMod,lilyMidiBody
syn region lilyMidiBody start=&{& end=&}& contains=@lilyMidi contained
syn region lilyMidiBody start=&<<& end=&>>& contains=@lilyMidi contained
syn match lilyContextMod &\v\\context\s*& nextgroup=lilyContextModBody contained
syn cluster lilyContextMod contains=@lilyGlobal,lilyContextModBody
syn region lilyContextModBody start=&{& end=&}& contains=@lilyContextMod contained
syn region lilyContextModBody start=&<<& end=&>>& contains=@lilyContextMod contained
syn match lilyWith &\v\\with\s*& nextgroup=lilyWithBody
syn cluster lilyWith contains=@lilyGlobal,lilyVar,lilyWithBody
syn region lilyWithBody start=&{& end=&}& contains=@lilyWith contained
syn region lilyWithBody start=&<<& end=&>>& contains=@lilyWith contained
syn include syntax/scheme.vim
unlet b:current_syntax
syn cluster _schemeRoot contains=schemeBoolean,schemeCharacter,schemeComment,schemeConstant,schemeDelimiter,schemeError,schemeNumber,schemeOther,_schemeQuote,schemeString,_schemeLily
syn cluster _schemeAll contains=@_schemeRoot,_schemeStruc,schemeFunc,schemeSyntax
syn cluster _schemeQuoted contains=@_schemeRoot,_schemeQuoted,_schemeUnquote
syn match _schemeQuote &['`]\s*& nextgroup=@_schemeQuoted contained
syn match _schemeUnquote &,@\?\s*& nextgroup=@_schemeAll contained
syn region _schemeQuoted matchgroup=Delimiter start=&(& matchgroup=Delimiter end=&)& contains=@_schemeQuoted contained
syn region _schemeQuoted matchgroup=Delimiter start=&#(& matchgroup=Delimiter end=&)& contains=@_schemeQuoted contained
syn region _schemeStruc matchgroup=Delimiter start=&(& matchgroup=Delimiter end=&)& contains=@_schemeAll contained
syn region _schemeStruc matchgroup=Delimiter start=&#(& matchgroup=Delimiter end=&)& contains=@_schemeQuoted contained
syn region _schemeLily matchgroup=_schemeLilyStart start=&#{& matchgroup=_schemeLilyStart end=&#}& contains=@lilyNotemode contained
syn match lilyScheme &[#$]@\?& nextgroup=@_schemeAll
